/* main-1.0.10 jQuery.imgScroll.js Date:2015-11-27 01:57:30 */
!function (a) {
    a.fn.imgScroll = function (b, c) {
        var d = {
            data: [],
            template: null,
            evtType: "click",
            visible: 1,
            direction: "x",
            next: "#next",
            prev: "#prev",
            disableClass: "disabled",
            disableClassPerfix: !1,
            speed: 300,
            step: 1,
            loop: !1,
            showControl: !1,
            width: null,
            height: null,
            navItems: !1,
            navItmesWrapClass: "scroll-nav-wrap",
            navItemActivedClass: "current",
            status: !1,
            statusWrapSelector: ".scroll-status-wrap"
        };
        var e = a.extend(d, b);
        return this.each(function () {
            var f, b = a(this), d = b.find("ul").eq(0), g = d.children("li"), h = g.length, i = null, j = null, k = "string" == typeof e.next ? a(e.next) : e.next, l = "string" == typeof e.prev ? a(e.prev) : e.prev, m = 0, n = e.step, o = e.visible, p = Math.ceil((h - o) / n) + 1, q = e.loop, r = e.direction, s = e.evtType, t = e.disableClass, u = e.disableClassPerfix ? e.disableClassPerfix + "-prev-" + t : t, v = e.disableClassPerfix ? e.disableClassPerfix + "-next-" + t : t, w = e.navItems, x = e.navItmesWrapClass, y = a("." + x).length > 0, z = e.navItemActivedClass, A = e.status, B = e.statusWrapSelector, C = a(B).length > 0, D = !1, E = !0, F = (h - o) % n === 0, G = e.template || '<ul>{for slide in list}<li><a href="${slide.href}" target="_blank"><img src="${slide.src}" alt="${slide.alt}" /></a></li>{/for}</ul>';

            function H(a) {
                q || (h > n && h > o ? (l.addClass(u), k.removeClass(v)) : o >= h && k.addClass(v)), "left" !== g.eq(0).css("float") && g.css("float", "left"), i = e.width || g.eq(0).outerWidth(), j = e.height || g.eq(0).outerHeight(), b.css({
                    position: "static" == b.css("position") ? "relative" : b.css("position"),
                    width: "x" == a ? i * o : i,
                    height: "x" == a ? j : j * o,
                    overflow: "hidden"
                }), d.css({
                    position: "absolute",
                    width: "x" == a ? i * h : i,
                    height: "x" == a ? j : j * h,
                    top: 0,
                    left: 0
                }), "function" == typeof c && c.apply(b, [m, p, g.slice(m * n, m * n + o), g.slice(m * n + o - n, m * n + o)])
            }

            function I() {
                h = e.data.length, d = b.find("ul").eq(0), g = d.children("li"), p = Math.ceil((h - o) / n) + 1, F = (h - o) % n === 0
            }

            function J(a) {
                var c = {list: a};
                b.html(G.process(c)), I()
            }

            function K(a, s) {
                if (d.is(":animated"))return !1;
                if (q)E && s && (m = p), D && !s && (m = -1), a = s ? --m : ++m; else {
                    if (E && s || D && !s)return !1;
                    a = s ? --m : ++m
                }
                f = "x" == r ? {left: a >= p - 1 ? -(h - o) * i : -a * n * i} : {top: a >= p - 1 ? -(h - o) * j : -a * n * j};
                function t() {
                    q ? (D = o >= h - a * n ? !0 : !1, E = 0 >= a ? !0 : !1) : (o >= h - a * n ? (k.addClass(v), D = !0) : (k.removeClass(v), D = !1), 0 >= a ? (l.addClass(u), E = !0) : (l.removeClass(u), E = !1)), (w || A) && N(a), "function" == typeof c && c.apply(b, [a, p, g.slice(a * n, a * n + o), g.slice(a * n + o - n, a * n + o)])
                }

                e.speed ? d.animate(f, e.speed, t) : (d.css(f), t())
            }

            function L(c, d) {
                var e = y ? a("." + c).eq(0) : a('<div class="' + c + '"></div>');
                for (var f = 0; p > f; f++)e.append("<em " + (0 === f ? " class=" + d : "") + ' title="' + (f + 1) + '">' + (f + 1) + "</em>");
                y || b.after(e)
            }

            function M() {
                var c = C ? a(B).eq(0) : a('<div class="' + B.replace(".", "") + '"></div>');
                c.html("<b>1</b>/" + p), C || b.after(c)
            }

            function N(b) {
                w && a("." + x).find("em").removeClass(z).eq(b).addClass(z), A && a(B).html("<b>" + (b + 1) + "</b>/" + p)
            }

            function O() {
                l.unbind(s).bind(s, function () {
                    K(m, !0)
                }), k.unbind(s).bind(s, function () {
                    K(m, !1)
                })
            }

            if (e.data.length > 0) {
                if (!e.width || !e.height)return !1;
                J(e.data)
            }
            h > o && o >= n ? (H(r), O(), w && L(x, z), A && M(B)) : (e.showControl ? k.add(l).show() : k.add(l).hide(), l.addClass(u), k.addClass(v))
        })
    }
}(jQuery);
/* main-1.0.10 jQuery.zoom.js Date:2015-11-27 01:57:30 */
!function (a) {
    a.fn.jqueryzoom = function (b) {
        var c = {xzoom: 200, yzoom: 200, offset: 10, position: "right", lens: 1, preload: 1};
        b && a.extend(c, b);
        var d = "";
        a(this).hover(function () {
            var b = a(this).offset().left;
            var e = a(this).offset().top;
            var f = a(this).find("img").get(0).offsetWidth;
            var g = a(this).find("img").get(0).offsetHeight;
            d = a(this).find("img").attr("alt");
            var h = a(this).find("img").attr("jqimg");
            a(this).find("img").attr("alt", ""), 0 == a("div.zoomdiv").get().length && (a(this).after("<div class='zoomdiv'><img class='bigimg' src='" + h + "'/></div>"), a(this).append("<div class='jqZoomPup'>&nbsp;</div>"));
            function i(a) {
                this.x = a.pageX, this.y = a.pageY
            }

            a("div.zoomdiv").width(c.xzoom), a("div.zoomdiv").height(c.yzoom), a("div.zoomdiv").show(), c.lens || a(this).css("cursor", "crosshair"), a(document.body).mousemove(function (d) {
                mouse = new i(d);
                var h = a(".bigimg").get(0).offsetWidth;
                var j = a(".bigimg").get(0).offsetHeight;
                var k = "x";
                var l = "y";
                if (isNaN(l) | isNaN(k)) {
                    var l = h / f;
                    var k = j / g;
                    a("div.jqZoomPup").width(c.xzoom / (1 * l)), a("div.jqZoomPup").height(c.yzoom / (1 * k)), c.lens && a("div.jqZoomPup").css("visibility", "visible")
                }
                xpos = mouse.x - a("div.jqZoomPup").width() / 2 - b, ypos = mouse.y - a("div.jqZoomPup").height() / 2 - e, c.lens && (xpos = mouse.x - a("div.jqZoomPup").width() / 2 < b ? 0 : mouse.x + a("div.jqZoomPup").width() / 2 > f + b ? f - a("div.jqZoomPup").width() - 2 : xpos, ypos = mouse.y - a("div.jqZoomPup").height() / 2 < e ? 0 : mouse.y + a("div.jqZoomPup").height() / 2 > g + e ? g - a("div.jqZoomPup").height() - 2 : ypos), c.lens && a("div.jqZoomPup").css({
                    top: ypos,
                    left: xpos
                }), scrolly = ypos, a("div.zoomdiv").get(0).scrollTop = scrolly * k, scrollx = xpos, a("div.zoomdiv").get(0).scrollLeft = scrollx * l
            })
        }, function () {
            a(this).children("img").attr("alt", d), a(document.body).unbind("mousemove"), c.lens && a("div.jqZoomPup").remove(), a("div.zoomdiv").remove()
        }), count = 0, c.preload && (a("body").append("<div style='display:none;' class='jqPreload" + count + "'>360buy</div>"), a(this).each(function () {
            var b = a(this).children("img").attr("jqimg");
            var c = jQuery("div.jqPreload" + count).html();
            jQuery("div.jqPreload" + count).html(c + '<img src="' + b + '">')
        }))
    }
}(jQuery)

//商品缩略图
var c = $("#spec-list li");
c.mouseover(function () {
    var a = $(this).find("img");
    var d = a.attr("src");
        c.find("img").removeClass("img-hover"),
        a.addClass("img-hover"),
        $("#spec-n1 img").eq(0).attr({
            src: d.replace("/n5/", "/n1/")
        })
});
var d = $(".jqzoom");
d.find("img").attr("src") && d.jqueryzoom({
    xzoom: 400,
    yzoom: 400,
    offset: 10,
    position: "left",
    preload: 1,
    lens: 1
}), $(".spec-items").imgScroll({
    visible: 5,
    showControl: !0,
    step: 1,
    loop: !1,
    prev: "#spec-forward",
    next: "#spec-backward"
});

//商品数量增减
window.setAmount = {
    min: 1,
    max: 199,
    count: 1,
    countEl: $("#buy-num"),
    buyLink: $("#InitCartUrl"),
    targetLink: $("#InitCartUrl"),
    matchCountKey: ["pcount", "pCount", "num"],
    add: function () {
        return this.disabled ? !1 : this.count >= this.max ? !1 : (this.count++, this.countEl.val(this.count), void this.setBuyLink())
    },
    reduce: function () {
        return this.disabled ? !1 : this.count <= this.min ? !1 : (this.count--, this.countEl.val(this.count), void this.setBuyLink())
    },
    modify: function () {
        var a = parseInt(this.countEl.val(), 10);
        return this.disabled ? !1 : "" == this.countEl.val() ? !1 : isNaN(a) || a < this.min || a > this.max ? (this.countEl.val(this.count), !1) : (this.count = a, void this.setBuyLink())
    },
    disable: function () {
        this.disabled = !0, this.countEl.attr("disabled", !0)
    },
    enable: function () {
        this.disabled = !1, this.countEl.removeAttr("disabled")
    },
    setBuyLink: function () {
        var a = this;
        a.targetLink.each(function () {
            var e, f, b = $(this), c = b.attr("href"), d = c.split("?")[1];
            !function () {
                for (var g = 0; g < a.matchCountKey.length; g++)if (f = new RegExp(a.matchCountKey[g] + "=\\d+"), f.test(d))return e = c.replace(f, a.matchCountKey[g] + "=" + a.count), b.attr("href", e), !1
            }()
        })
    }
}

//商品详情tab
function onSelect(num){
    if(num==1){
        $('#product-detail-1').removeClass('f-dn');
        $('#product-detail-2').addClass('f-dn');
        $('#product-detail-3').addClass('f-dn');

        $("#tab-item1").addClass("fore curr");
        $("#tab-item2").removeClass("fore curr");
        $("#tab-item3").removeClass("fore curr");
    }else if(num==2){
        $('#product-detail-2').removeClass('f-dn');
        $('#product-detail-1').addClass('f-dn');
        $('#product-detail-3').addClass('f-dn');

        $("#tab-item2").addClass("fore curr");
        $("#tab-item1").removeClass("fore curr");
        $("#tab-item3").removeClass("fore curr");
    }else if(num==3){
        $('#product-detail-3').removeClass('f-dn');
        $('#product-detail-1').addClass('f-dn');
        $('#product-detail-2').addClass('f-dn');
        $("#tab-item3").addClass("fore curr");
        $("#tab-item1").removeClass("fore curr");
        $("#tab-item2").removeClass("fore curr");
    }
}
